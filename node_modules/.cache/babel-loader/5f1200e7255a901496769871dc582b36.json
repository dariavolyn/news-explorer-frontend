{"ast":null,"code":"import _classCallCheck from\"/Users/dashon/Desktop/news-explorer-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/dashon/Desktop/news-explorer-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";var MainApi=/*#__PURE__*/function(){function MainApi(_ref){var baseUrl=_ref.baseUrl,headers=_ref.headers;_classCallCheck(this,MainApi);this.baseUrl=baseUrl;this.headers=headers;}_createClass(MainApi,[{key:\"_checkResponse\",value:function _checkResponse(res){return res.ok?res.json():console.log(\"Error: \".concat(res.status));}},{key:\"registerUser\",value:function registerUser(email,password,username){return fetch(\"\".concat(this.baseUrl,\"/signup\"),{method:\"POST\",headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({email:email,password:password,username:username})}).then(this._checkResponse);}},{key:\"authorizeUser\",value:function authorizeUser(_ref2){var email=_ref2.email,password=_ref2.password;return fetch(\"\".concat(this.baseUrl,\"/signin\"),{method:\"POST\",headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({email:email,password:password})}).then(this._checkResponse).then(function(data){if(data.token){localStorage.setItem('token',data.token);return data;}else{return;}});}},{key:\"getContent\",value:function getContent(token){return fetch(\"\".concat(this.baseUrl,\"/users/me\"),{method:'GET',headers:{'Accept':'application/json','Content-Type':'application/json','Authorization':\"Bearer \".concat(token)}}).then(this._checkResponse).then(function(data){return data;});}}]);return MainApi;}();var mainApi=new MainApi({baseUrl:\"localhost:3000\"});export default mainApi;","map":{"version":3,"sources":["/Users/dashon/Desktop/news-explorer-frontend/src/utils/MainApi.js"],"names":["MainApi","baseUrl","headers","res","ok","json","console","log","status","email","password","username","fetch","method","body","JSON","stringify","then","_checkResponse","data","token","localStorage","setItem","mainApi"],"mappings":"uUAAMA,CAAAA,O,yBACF,sBAAkC,IAApBC,CAAAA,OAAoB,MAApBA,OAAoB,CAAXC,OAAW,MAAXA,OAAW,+BAC9B,KAAKD,OAAL,CAAeA,OAAf,CACA,KAAKC,OAAL,CAAeA,OAAf,CACH,C,kDAED,wBAAeC,GAAf,CAAoB,CAChB,MAAOA,CAAAA,GAAG,CAACC,EAAJ,CAASD,GAAG,CAACE,IAAJ,EAAT,CAAsBC,OAAO,CAACC,GAAR,kBAAsBJ,GAAG,CAACK,MAA1B,EAA7B,CACH,C,4BAED,sBAAaC,KAAb,CAAoBC,QAApB,CAA8BC,QAA9B,CAAwC,CACpC,MAAOC,CAAAA,KAAK,WAAI,KAAKX,OAAT,YAA2B,CACnCY,MAAM,CAAE,MAD2B,CAEnCX,OAAO,CAAE,CACL,SAAU,kBADL,CAEL,eAAgB,kBAFX,CAF0B,CAMnCY,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAEP,KAAK,CAALA,KAAF,CAASC,QAAQ,CAARA,QAAT,CAAmBC,QAAQ,CAARA,QAAnB,CAAf,CAN6B,CAA3B,CAAL,CAQNM,IARM,CAQD,KAAKC,cARJ,CAAP,CASH,C,6BAED,6BAAmC,IAAnBT,CAAAA,KAAmB,OAAnBA,KAAmB,CAAZC,QAAY,OAAZA,QAAY,CAC/B,MAAOE,CAAAA,KAAK,WAAI,KAAKX,OAAT,YAA2B,CACnCY,MAAM,CAAE,MAD2B,CAEnCX,OAAO,CAAE,CACL,SAAU,kBADL,CAEL,eAAgB,kBAFX,CAF0B,CAMnCY,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAEP,KAAK,CAALA,KAAF,CAASC,QAAQ,CAARA,QAAT,CAAf,CAN6B,CAA3B,CAAL,CAQFO,IARE,CAQG,KAAKC,cARR,EASFD,IATE,CASG,SAACE,IAAD,CAAU,CACZ,GAAIA,IAAI,CAACC,KAAT,CAAgB,CACZC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BH,IAAI,CAACC,KAAnC,EACA,MAAOD,CAAAA,IAAP,CACH,CAHD,IAGO,CACH,OACH,CACJ,CAhBE,CAAP,CAiBH,C,0BAED,oBAAWC,KAAX,CAAkB,CACd,MAAOR,CAAAA,KAAK,WAAI,KAAKX,OAAT,cAA6B,CACrCY,MAAM,CAAE,KAD6B,CAErCX,OAAO,CAAE,CACL,SAAU,kBADL,CAEL,eAAgB,kBAFX,CAGL,iCAA2BkB,KAA3B,CAHK,CAF4B,CAA7B,CAAL,CAQFH,IARE,CAQG,KAAKC,cARR,EASFD,IATE,CASG,SAAAE,IAAI,QAAIA,CAAAA,IAAJ,EATP,CAAP,CAUH,C,uBAGL,GAAMI,CAAAA,OAAO,CAAG,GAAIvB,CAAAA,OAAJ,CAAY,CACxBC,OAAO,CAAE,gBADe,CAAZ,CAAhB,CAIA,cAAesB,CAAAA,OAAf","sourcesContent":["class MainApi {\n    constructor({ baseUrl, headers }) {\n        this.baseUrl = baseUrl\n        this.headers = headers\n    }\n\n    _checkResponse(res) {\n        return res.ok ? res.json() : console.log(`Error: ${res.status}`)\n    }\n\n    registerUser(email, password, username) {\n        return fetch(`${this.baseUrl}/signup`, {\n            method: \"POST\",\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({ email, password, username })\n        })\n        .then(this._checkResponse)\n    }\n\n    authorizeUser({ email, password }) {\n        return fetch(`${this.baseUrl}/signin`, {\n            method: \"POST\",\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({ email, password }),\n        })\n            .then(this._checkResponse)\n            .then((data) => {\n                if (data.token) {\n                    localStorage.setItem('token', data.token);\n                    return data;\n                } else {\n                    return;\n                }\n            })\n    }\n\n    getContent(token) {\n        return fetch(`${this.baseUrl}/users/me`, {\n            method: 'GET',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${token}`,\n            }\n        })\n            .then(this._checkResponse)\n            .then(data => data)\n    }\n}\n\nconst mainApi = new MainApi({\n    baseUrl: \"localhost:3000\"\n}) \n\nexport default mainApi;"]},"metadata":{},"sourceType":"module"}