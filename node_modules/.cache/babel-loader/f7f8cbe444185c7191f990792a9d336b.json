{"ast":null,"code":"import _classCallCheck from\"/Users/dashon/Desktop/news-explorer-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/dashon/Desktop/news-explorer-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";var MainApi=/*#__PURE__*/function(){function MainApi(_ref){var baseUrl=_ref.baseUrl,headers=_ref.headers;_classCallCheck(this,MainApi);this.baseUrl=baseUrl;this.headers=headers;}_createClass(MainApi,[{key:\"_checkResponse\",value:function _checkResponse(res){return res.ok?res.json():console.log(\"Error: \".concat(res.status));}},{key:\"registerUser\",value:function registerUser(email,password,username){return fetch(\"\".concat(this.baseUrl,\"/signup\"),{method:\"POST\",headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({email:email,password:password,username:username})}).then(this._checkResponse);}},{key:\"authorizeUser\",value:function authorizeUser(email,password){return fetch(\"\".concat(this.baseUrl,\"/signin\"),{method:\"POST\",headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({email:email,password:password})}).then(this._checkResponse).then(function(data){if(data.token){localStorage.setItem('token',data.token);return data;}else{return;}});}},{key:\"getContent\",value:function getContent(token){return fetch(\"\".concat(this.baseUrl,\"/users/me\"),{method:'GET',headers:{'Accept':'application/json','Content-Type':'application/json','Authorization':\"Bearer \".concat(token)}}).then(this._checkResponse).then(function(data){return data;});}},{key:\"getUserInfo\",value:function getUserInfo(token){return fetch(\"\".concat(this.baseUrl,\"/users/me\"),{method:\"GET\",headers:{'Accept':'application/json','Content-Type':'application/json','Authorization':\"Bearer \".concat(token)}}).then(this._checkResponse);}},{key:\"saveArticle\",value:function saveArticle(token,article){var description=article.description,keyword=article.keyword,publishedAt=article.publishedAt,src=article.src,title=article.title,url=article.url,urlToImage=article.urlToImage;return fetch(\"\".concat(this.baseUrl,\"/articles\"),{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify({description:description,keyword:keyword,publishedAt:publishedAt,src:src,title:title,url:url,urlToImage:urlToImage})}).then(this._checkResponse);}},{key:\"getSavedArticles\",value:function getSavedArticles(){return fetch(\"\".concat(this.baseUrl,\"/articles\"),{method:'GET',headers:{'Accept':'application/json','Content-Type':'application/json'}}).then(this._checkResponse);}}]);return MainApi;}();var mainApi=new MainApi({baseUrl:process.env.NODE_ENV===\"production\"?\"https://api.daria-news.students.nomoreparties.site\":\"http://localhost:3000\"});export default mainApi;","map":{"version":3,"sources":["/Users/dashon/Desktop/news-explorer-frontend/src/utils/MainApi.js"],"names":["MainApi","baseUrl","headers","res","ok","json","console","log","status","email","password","username","fetch","method","body","JSON","stringify","then","_checkResponse","data","token","localStorage","setItem","article","description","keyword","publishedAt","src","title","url","urlToImage","mainApi","process","env","NODE_ENV"],"mappings":"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","sourcesContent":["class MainApi {\n    constructor({ baseUrl, headers }) {\n        this.baseUrl = baseUrl\n        this.headers = headers\n    }\n\n    _checkResponse(res) {\n        return res.ok ? res.json() : console.log(`Error: ${res.status}`)\n    }\n\n    registerUser(email, password, username) {\n        return fetch(`${this.baseUrl}/signup`, {\n            method: \"POST\",\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({ email, password, username })\n        })\n            .then(this._checkResponse)\n    }\n\n    authorizeUser(email, password) {\n        return fetch(`${this.baseUrl}/signin`, {\n            method: \"POST\",\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({ email, password }),\n        })\n            .then(this._checkResponse)\n            .then((data) => {\n                if (data.token) {\n                    localStorage.setItem('token', data.token);\n                    return data;\n                } else {\n                    return;\n                }\n            })\n    }\n\n    getContent(token) {\n        return fetch(`${this.baseUrl}/users/me`, {\n            method: 'GET',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${token}`,\n            }\n        })\n            .then(this._checkResponse)\n            .then(data => data)\n    }\n\n    getUserInfo(token) {\n        return fetch(`${this.baseUrl}/users/me`, {\n            method: \"GET\",\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${token}`,\n            }\n        })\n            .then(this._checkResponse)\n    }\n\n    saveArticle(token, article) {\n        const { description, keyword, publishedAt, src, title, url, urlToImage } = article;\n\n        return fetch(`${this.baseUrl}/articles`, {\n            method: 'POST',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${token}`,\n\n            },\n            body: JSON.stringify({ description, keyword, publishedAt, src, title, url, urlToImage })\n        })\n            .then(this._checkResponse)\n    }\n\n    getSavedArticles() {\n        return fetch(`${this.baseUrl}/articles`, {\n            method: 'GET',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(this._checkResponse)\n    }\n}\n\nconst mainApi = new MainApi({\n    baseUrl:\n        process.env.NODE_ENV === \"production\"\n            ? \"https://api.daria-news.students.nomoreparties.site\"\n            : \"http://localhost:3000\",\n})\n\nexport default mainApi;"]},"metadata":{},"sourceType":"module"}