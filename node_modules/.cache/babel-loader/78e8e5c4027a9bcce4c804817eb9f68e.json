{"ast":null,"code":"import _classCallCheck from\"/Users/dashon/Desktop/react-around-api-full/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/dashon/Desktop/react-around-api-full/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";var Auth=/*#__PURE__*/function(){function Auth(_ref){var baseUrl=_ref.baseUrl,headers=_ref.headers;_classCallCheck(this,Auth);this.baseUrl=baseUrl;this.headers=headers;}_createClass(Auth,[{key:\"_checkResponse\",value:function _checkResponse(res){return res.ok?res.json():console.log(\"Error: \".concat(res.status));}},{key:\"registerUser\",value:function registerUser(_ref2){var email=_ref2.email,password=_ref2.password;return fetch(\"\".concat(this.baseUrl,\"/signup\"),{method:\"POST\",headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({email:email,password:password})}).then(this._checkResponse);}},{key:\"authorizeUser\",value:function authorizeUser(_ref3){var email=_ref3.email,password=_ref3.password;return fetch(\"\".concat(this.baseUrl,\"/signin\"),{method:\"POST\",headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({email:email,password:password})}).then(this._checkResponse).then(function(data){if(data.token){localStorage.setItem('token',data.token);return data;}else{return;}});}},{key:\"getContent\",value:function getContent(token){return fetch(\"\".concat(this.baseUrl,\"/users/me\"),{method:'GET',headers:{'Accept':'application/json','Content-Type':'application/json','Authorization':\"Bearer \".concat(token)}}).then(this._checkResponse).then(function(data){return data;});}}]);return Auth;}();var auth=new Auth({baseUrl:\"dariavolyn.students.nomoreparties.site\"});export default auth;","map":{"version":3,"sources":["/Users/dashon/Desktop/react-around-api-full/frontend/src/utils/auth.js"],"names":["Auth","baseUrl","headers","res","ok","json","console","log","status","email","password","fetch","method","body","JSON","stringify","then","_checkResponse","data","token","localStorage","setItem","auth"],"mappings":"uVAAMA,CAAAA,I,yBACF,mBAAkC,IAApBC,CAAAA,OAAoB,MAApBA,OAAoB,CAAXC,OAAW,MAAXA,OAAW,4BAC9B,KAAKD,OAAL,CAAeA,OAAf,CACA,KAAKC,OAAL,CAAeA,OAAf,CACH,C,+CAED,wBAAeC,GAAf,CAAoB,CAChB,MAAOA,CAAAA,GAAG,CAACC,EAAJ,CAASD,GAAG,CAACE,IAAJ,EAAT,CAAsBC,OAAO,CAACC,GAAR,kBAAsBJ,GAAG,CAACK,MAA1B,EAA7B,CACH,C,4BAED,4BAAkC,IAAnBC,CAAAA,KAAmB,OAAnBA,KAAmB,CAAZC,QAAY,OAAZA,QAAY,CAC9B,MAAOC,CAAAA,KAAK,WAAI,KAAKV,OAAT,YAA2B,CACnCW,MAAM,CAAE,MAD2B,CAEnCV,OAAO,CAAE,CACL,SAAU,kBADL,CAEL,eAAgB,kBAFX,CAF0B,CAMnCW,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAEN,KAAK,CAALA,KAAF,CAASC,QAAQ,CAARA,QAAT,CAAf,CAN6B,CAA3B,CAAL,CAQNM,IARM,CAQD,KAAKC,cARJ,CAAP,CASH,C,6BAED,6BAAmC,IAAnBR,CAAAA,KAAmB,OAAnBA,KAAmB,CAAZC,QAAY,OAAZA,QAAY,CAC/B,MAAOC,CAAAA,KAAK,WAAI,KAAKV,OAAT,YAA2B,CACnCW,MAAM,CAAE,MAD2B,CAEnCV,OAAO,CAAE,CACL,SAAU,kBADL,CAEL,eAAgB,kBAFX,CAF0B,CAMnCW,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAEN,KAAK,CAALA,KAAF,CAASC,QAAQ,CAARA,QAAT,CAAf,CAN6B,CAA3B,CAAL,CAQFM,IARE,CAQG,KAAKC,cARR,EASFD,IATE,CASG,SAACE,IAAD,CAAU,CACZ,GAAIA,IAAI,CAACC,KAAT,CAAgB,CACZC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BH,IAAI,CAACC,KAAnC,EACA,MAAOD,CAAAA,IAAP,CACH,CAHD,IAGO,CACH,OACH,CACJ,CAhBE,CAAP,CAiBH,C,0BAED,oBAAWC,KAAX,CAAkB,CACd,MAAOR,CAAAA,KAAK,WAAI,KAAKV,OAAT,cAA6B,CACrCW,MAAM,CAAE,KAD6B,CAErCV,OAAO,CAAE,CACL,SAAU,kBADL,CAEL,eAAgB,kBAFX,CAGL,iCAA2BiB,KAA3B,CAHK,CAF4B,CAA7B,CAAL,CAQFH,IARE,CAQG,KAAKC,cARR,EASFD,IATE,CASG,SAAAE,IAAI,QAAIA,CAAAA,IAAJ,EATP,CAAP,CAUH,C,oBAGL,GAAMI,CAAAA,IAAI,CAAG,GAAItB,CAAAA,IAAJ,CAAS,CAClBC,OAAO,CAAE,wCADS,CAAT,CAAb,CAIA,cAAeqB,CAAAA,IAAf","sourcesContent":["class Auth {\n    constructor({ baseUrl, headers }) {\n        this.baseUrl = baseUrl\n        this.headers = headers\n    }\n\n    _checkResponse(res) {\n        return res.ok ? res.json() : console.log(`Error: ${res.status}`)\n    }\n\n    registerUser({ email, password }) {\n        return fetch(`${this.baseUrl}/signup`, {\n            method: \"POST\",\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({ email, password })\n        })\n        .then(this._checkResponse)\n    }\n\n    authorizeUser({ email, password }) {\n        return fetch(`${this.baseUrl}/signin`, {\n            method: \"POST\",\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({ email, password }),\n        })\n            .then(this._checkResponse)\n            .then((data) => {\n                if (data.token) {\n                    localStorage.setItem('token', data.token);\n                    return data;\n                } else {\n                    return;\n                }\n            })\n    }\n\n    getContent(token) {\n        return fetch(`${this.baseUrl}/users/me`, {\n            method: 'GET',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${token}`,\n            }\n        })\n            .then(this._checkResponse)\n            .then(data => data)\n    }\n}\n\nconst auth = new Auth({\n    baseUrl: \"dariavolyn.students.nomoreparties.site\"\n})\n\nexport default auth;"]},"metadata":{},"sourceType":"module"}