{"ast":null,"code":"import _slicedToArray from\"/Users/dashon/Desktop/news-explorer-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Route,Switch,useHistory}from'react-router-dom';import Authentication from'../Authentication/Authentication.js';import Header from'../Header/Header.js';import Footer from'../Footer/Footer.js';import Main from'../Main/Main.js';import Register from'../Register/Register.js';import SavedNews from'../SavedNews/SavedNews.js';import SuccessPopup from'../SuccessPopup/SuccessPopup.js';import newsApi from'../../utils/NewsApi.js';import mainApi from'../../utils/MainApi.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),cards=_useState2[0],setCards=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isRegisterOpen=_useState4[0],setRegisterOpen=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isAuthOpen=_useState6[0],setAuthOpen=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isNavMobileOpen=_useState8[0],setNavMobileOpen=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isCardSaved=_useState10[0],setCardSaved=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),isSuccessPopupOpen=_useState12[0],setSuccessPopupOpen=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),isPreloaderOpen=_useState14[0],setIsPreloaderOpen=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),isNothingFoundOpen=_useState16[0],setIsNothingFoundOpen=_useState16[1];var history=useHistory();useEffect(function(){var close=function close(e){if(e.keyCode===27){closeAllPopups();}};window.addEventListener('keydown',close);return function(){return window.removeEventListener('keydown',close);};},[]);function searchCards(search){setIsPreloaderOpen(true);setIsNothingFoundOpen(false);setCards([]);newsApi.getCardsList(search).then(function(res){if(res.totalResults===0){setIsNothingFoundOpen(true);}else{setCards(res);}}).then(function(){return setIsPreloaderOpen(false);}).catch(function(err){console.log(err);});}function handleAuthOpen(){setSuccessPopupOpen(false);setRegisterOpen(false);setAuthOpen(true);history.push('/signin');}function handleRegisterOpen(){setAuthOpen(false);setRegisterOpen(true);}function handleNavMobileOpen(){setNavMobileOpen(true);}function handleSaveCard(){if(setCardSaved(true)){setCardSaved(false);}setCardSaved(true);}function closeAllPopups(e){history.push('/');setSuccessPopupOpen(false);setRegisterOpen(false);setAuthOpen(false);setNavMobileOpen(false);}function handleRegister(email,password,username){mainApi.registerUser(email,password,username).then(function(){setRegisterOpen(false);setSuccessPopupOpen(true);}).catch(function(e){return console.log(e);});}function handleAuth(email,password){mainApi.authorizeUser(email,password).then(function(){closeAllPopups();history.push('/saved-news');}).catch(function(e){return console.log(e);});}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/saved-news\",children:/*#__PURE__*/_jsx(SavedNews,{isNavMobileOpen:isNavMobileOpen,onClose:closeAllPopups,onOpen:handleNavMobileOpen,page:\"saved-news\"})}),/*#__PURE__*/_jsxs(Route,{path:\"/\",children:[/*#__PURE__*/_jsx(Header,{isNavMobileOpen:isNavMobileOpen,onAuth:handleAuthOpen,onClose:closeAllPopups,onOpen:handleNavMobileOpen,handleRegisterOpen:handleRegisterOpen,page:\"main\"}),/*#__PURE__*/_jsx(Main,{cards:cards.articles,isNothingFoundOpen:isNothingFoundOpen,isPreloaderOpen:isPreloaderOpen,isSaved:isCardSaved,onSave:handleSaveCard,page:\"main\",searchCards:searchCards})]})]}),/*#__PURE__*/_jsx(Route,{path:\"/signin\",children:/*#__PURE__*/_jsx(Authentication,{altFormTitle:\"Sign up\",altFormLink:\"/signup\",openAltForm:handleRegisterOpen,isOpen:isAuthOpen,formSubmit:handleAuth,onClose:closeAllPopups})}),/*#__PURE__*/_jsx(Route,{path:\"/signup\",children:/*#__PURE__*/_jsx(Register,{altFormTitle:\"Sign in\",altFormLink:\"/signin\",openAltForm:handleAuthOpen,isOpen:isRegisterOpen,formSubmit:handleRegister,onClose:closeAllPopups})}),/*#__PURE__*/_jsx(SuccessPopup,{isOpen:isSuccessPopupOpen,openAuth:handleAuthOpen,onClose:closeAllPopups}),/*#__PURE__*/_jsx(Footer,{})]})});}export default App;","map":{"version":3,"sources":["/Users/dashon/Desktop/news-explorer-frontend/src/components/App/App.js"],"names":["React","useEffect","useState","Route","Switch","useHistory","Authentication","Header","Footer","Main","Register","SavedNews","SuccessPopup","newsApi","mainApi","App","cards","setCards","isRegisterOpen","setRegisterOpen","isAuthOpen","setAuthOpen","isNavMobileOpen","setNavMobileOpen","isCardSaved","setCardSaved","isSuccessPopupOpen","setSuccessPopupOpen","isPreloaderOpen","setIsPreloaderOpen","isNothingFoundOpen","setIsNothingFoundOpen","history","close","e","keyCode","closeAllPopups","window","addEventListener","removeEventListener","searchCards","search","getCardsList","then","res","totalResults","catch","err","console","log","handleAuthOpen","push","handleRegisterOpen","handleNavMobileOpen","handleSaveCard","handleRegister","email","password","username","registerUser","handleAuth","authorizeUser","articles"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Route, Switch, useHistory } from 'react-router-dom';\n\nimport Authentication from '../Authentication/Authentication.js';\nimport Header from '../Header/Header.js';\nimport Footer from '../Footer/Footer.js';\nimport Main from '../Main/Main.js';\nimport Register from '../Register/Register.js';\nimport SavedNews from '../SavedNews/SavedNews.js';\nimport SuccessPopup from '../SuccessPopup/SuccessPopup.js';\nimport newsApi from '../../utils/NewsApi.js';\nimport mainApi from '../../utils/MainApi.js';\n\n\nfunction App() {\n    const [cards, setCards] = useState([]);\n    const [isRegisterOpen, setRegisterOpen] = useState(false);\n    const [isAuthOpen, setAuthOpen] = useState(false);\n    const [isNavMobileOpen, setNavMobileOpen] = useState(false);\n    const [isCardSaved, setCardSaved] = useState(false);\n    const [isSuccessPopupOpen, setSuccessPopupOpen] = useState(false);\n    const [isPreloaderOpen, setIsPreloaderOpen] = useState(false);\n    const [isNothingFoundOpen, setIsNothingFoundOpen] = useState(false);\n    const history = useHistory();\n\n    useEffect(() => {\n        const close = (e) => { if (e.keyCode === 27) { closeAllPopups(); } }\n        window.addEventListener('keydown', close)\n        return () => window.removeEventListener('keydown', close)\n    }, [])\n\n    function searchCards(search) {\n        setIsPreloaderOpen(true);\n\n        setIsNothingFoundOpen(false);\n\n        setCards([]);\n\n        newsApi.getCardsList(search)\n            .then((res) => {\n                if (res.totalResults === 0) {\n                    setIsNothingFoundOpen(true);\n                } else { setCards(res) }\n            })\n            .then(() => setIsPreloaderOpen(false))\n            .catch((err) => {\n                console.log(err);\n            });\n    }\n\n    function handleAuthOpen() {\n        setSuccessPopupOpen(false);\n        setRegisterOpen(false);\n        setAuthOpen(true);\n        history.push('/signin');\n    }\n\n    function handleRegisterOpen() {\n        setAuthOpen(false);\n        setRegisterOpen(true);\n    }\n\n    function handleNavMobileOpen() {\n        setNavMobileOpen(true);\n    }\n\n    function handleSaveCard() {\n        if (setCardSaved(true)) {\n            setCardSaved(false);\n        } setCardSaved(true)\n    }\n\n    function closeAllPopups(e) {\n        history.push('/');\n        setSuccessPopupOpen(false);\n        setRegisterOpen(false);\n        setAuthOpen(false);\n        setNavMobileOpen(false);\n    }\n\n    function handleRegister(email, password, username) {\n        mainApi.registerUser(email, password, username)\n            .then(() => {\n                setRegisterOpen(false);\n                setSuccessPopupOpen(true);\n            })\n            .catch((e) => console.log(e));\n    }\n\n\n    function handleAuth(email, password) {\n        mainApi.authorizeUser(email, password)\n            .then(() => {\n                closeAllPopups()\n                history.push('/saved-news');\n            })\n            .catch((e) => console.log(e));\n    }\n\n    return (\n        <>\n            <div className='app'>\n                <Switch>\n                    <Route exact path='/saved-news'>\n                        <SavedNews\n                            isNavMobileOpen={isNavMobileOpen}\n                            onClose={closeAllPopups}\n                            onOpen={handleNavMobileOpen}\n                            page='saved-news'\n                        />\n                    </Route>\n                    <Route path='/'>\n                        <Header\n                            isNavMobileOpen={isNavMobileOpen}\n                            onAuth={handleAuthOpen}\n                            onClose={closeAllPopups}\n                            onOpen={handleNavMobileOpen}\n                            handleRegisterOpen={handleRegisterOpen}\n                            page='main'\n                        />\n                        <Main\n                            cards={cards.articles}\n                            isNothingFoundOpen={isNothingFoundOpen}\n                            isPreloaderOpen={isPreloaderOpen}\n                            isSaved={isCardSaved}\n                            onSave={handleSaveCard}\n                            page='main'\n                            searchCards={searchCards}\n                        />\n                    </Route>\n                </Switch>\n\n                <Route path='/signin'>\n                    <Authentication\n                        altFormTitle='Sign up'\n                        altFormLink='/signup'\n                        openAltForm={handleRegisterOpen}\n                        isOpen={isAuthOpen}\n                        formSubmit={handleAuth}\n                        onClose={closeAllPopups}\n                    />\n                </Route>\n                <Route path='/signup'>\n                    <Register\n                        altFormTitle='Sign in'\n                        altFormLink='/signin'\n                        openAltForm={handleAuthOpen}\n                        isOpen={isRegisterOpen}\n                        formSubmit={handleRegister}\n                        onClose={closeAllPopups}\n                    />\n                </Route>\n\n                <SuccessPopup\n                    isOpen={isSuccessPopupOpen}\n                    openAuth={handleAuthOpen}\n                    onClose={closeAllPopups}\n                />\n\n                <Footer />\n            </div>\n        </>\n    )\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}