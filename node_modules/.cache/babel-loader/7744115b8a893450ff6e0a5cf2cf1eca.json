{"ast":null,"code":"import _slicedToArray from\"/Users/dashon/Desktop/news-explorer-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Route,Switch,useHistory}from'react-router-dom';import Authentication from'../Authentication/Authentication.js';import{CurrentUserContext}from'../../contexts/CurrentUserContext.js';import Header from'../Header/Header.js';import Footer from'../Footer/Footer.js';import Main from'../Main/Main.js';import Register from'../Register/Register.js';import SavedNews from'../SavedNews/SavedNews.js';import SuccessPopup from'../SuccessPopup/SuccessPopup.js';import newsApi from'../../utils/NewsApi.js';import mainApi from'../../utils/MainApi.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),cards=_useState2[0],setCards=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),savedCards=_useState4[0],setSavedCards=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),currentUser=_useState6[0],setCurrentUser=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),token=_useState8[0],setToken=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isAuthOpen=_useState10[0],setAuthOpen=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),isLoggedIn=_useState12[0],setLoggedIn=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),isRegisterOpen=_useState14[0],setRegisterOpen=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),isNavMobileOpen=_useState16[0],setNavMobileOpen=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),isNothingFoundOpen=_useState18[0],setIsNothingFoundOpen=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),isSuccessPopupOpen=_useState20[0],setSuccessPopupOpen=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),isPreloaderOpen=_useState22[0],setIsPreloaderOpen=_useState22[1];var history=useHistory();// global state for close on Esc\nuseEffect(function(){var close=function close(e){if(e.keyCode===27){closeAllPopups();}};window.addEventListener('keydown',close);return function(){return window.removeEventListener('keydown',close);};});// checking token\nuseEffect(function(){var token=localStorage.getItem('token');if(token){mainApi.getContent(token).then(function(){setToken(token);setLoggedIn(true);}).catch(function(e){return console.log(e);});}},[]);// getting user info\nReact.useEffect(function(){var token=localStorage.getItem('token');if(token){mainApi.getUserInfo(token).then(function(res){setCurrentUser({username:res.user.username,_id:res.user._id});}).catch(function(e){return console.log(e);});}},[]);// popup behaviour\nfunction handleAuthOpen(){setSuccessPopupOpen(false);setRegisterOpen(false);setAuthOpen(true);history.push('/signin');}function handleRegisterOpen(){setAuthOpen(false);setRegisterOpen(true);}function handleNavMobileOpen(){setNavMobileOpen(true);}function closeAllPopups(){setSuccessPopupOpen(false);setRegisterOpen(false);setAuthOpen(false);history.push('/');}function closeNavMobile(){setNavMobileOpen(false);}// user forms submit\nfunction handleAuth(email,password){mainApi.authorizeUser(email,password).then(function(res){closeAllPopups();setLoggedIn(true);setCurrentUser({username:res.user});history.push('/saved-news');}).catch(function(e){console.log(e);});}function handleRegister(email,password,username){mainApi.registerUser(email,password,username).then(function(){setRegisterOpen(false);setSuccessPopupOpen(true);}).catch(function(e){return console.log(e);});}// searching cards\nfunction searchCards(search){setIsPreloaderOpen(true);setIsNothingFoundOpen(false);setCards([]);newsApi.getCardsList(search).then(function(res){if(res.totalResults===0){setIsNothingFoundOpen(true);}else{setCards(res);}}).then(function(){setIsPreloaderOpen(false);}).catch(function(e){return console.log(e);});}// saving an article \nfunction handleSaveArticle(card){console.log(card);mainApi.saveArticle(token,card).then(function(res){console.log(res);setSavedCards(res);}).catch(function(e){return console.log(e);});}// load saved articles\n// useEffect(() => {\n//     mainApi.getSavedArticles(currentUser._id)\n//         .then((res) => {\n//             setSavedCards(res);\n//         })\n// }, [currentUser._id])\n// logging out\nfunction handleSignOut(){localStorage.removeItem('token');setCurrentUser({});setLoggedIn(false);history.push('/');}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(CurrentUserContext.Provider,{value:currentUser,children:/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/saved-news\",children:/*#__PURE__*/_jsx(SavedNews,{isLoggedIn:isLoggedIn,isNavMobileOpen:isNavMobileOpen,handleSignOut:handleSignOut,onClose:closeNavMobile,onOpen:handleNavMobileOpen,page:\"saved-news\",savedCards:savedCards})}),/*#__PURE__*/_jsxs(Route,{path:\"/\",children:[/*#__PURE__*/_jsx(Header,{closeNavMobile:closeNavMobile,isLoggedIn:isLoggedIn,isNavMobileOpen:isNavMobileOpen,handleRegisterOpen:handleRegisterOpen,handleSignOut:handleSignOut,onAuth:handleAuthOpen,onClose:closeAllPopups,onOpen:handleNavMobileOpen,page:\"main\"}),/*#__PURE__*/_jsx(Main,{cards:cards.articles,isLoggedIn:isLoggedIn,isNothingFoundOpen:isNothingFoundOpen,isPreloaderOpen:isPreloaderOpen,onSave:handleSaveArticle,searchCards:searchCards,page:\"main\"})]})]}),/*#__PURE__*/_jsx(Route,{path:\"/signin\",children:/*#__PURE__*/_jsx(Authentication,{altFormTitle:\"Sign up\",altFormLink:\"/signup\",openAltForm:handleRegisterOpen,isOpen:isAuthOpen,formSubmit:handleAuth,onClose:closeAllPopups})}),/*#__PURE__*/_jsx(Route,{path:\"/signup\",children:/*#__PURE__*/_jsx(Register,{altFormTitle:\"Sign in\",altFormLink:\"/signin\",openAltForm:handleAuthOpen,isOpen:isRegisterOpen,formSubmit:handleRegister,onClose:closeAllPopups})}),/*#__PURE__*/_jsx(SuccessPopup,{isOpen:isSuccessPopupOpen,openAuth:handleAuthOpen,onClose:closeAllPopups}),/*#__PURE__*/_jsx(Footer,{})]})})});}export default App;","map":{"version":3,"sources":["/Users/dashon/Desktop/news-explorer-frontend/src/components/App/App.js"],"names":["React","useEffect","useState","Route","Switch","useHistory","Authentication","CurrentUserContext","Header","Footer","Main","Register","SavedNews","SuccessPopup","newsApi","mainApi","App","cards","setCards","savedCards","setSavedCards","currentUser","setCurrentUser","token","setToken","isAuthOpen","setAuthOpen","isLoggedIn","setLoggedIn","isRegisterOpen","setRegisterOpen","isNavMobileOpen","setNavMobileOpen","isNothingFoundOpen","setIsNothingFoundOpen","isSuccessPopupOpen","setSuccessPopupOpen","isPreloaderOpen","setIsPreloaderOpen","history","close","e","keyCode","closeAllPopups","window","addEventListener","removeEventListener","localStorage","getItem","getContent","then","catch","console","log","getUserInfo","res","username","user","_id","handleAuthOpen","push","handleRegisterOpen","handleNavMobileOpen","closeNavMobile","handleAuth","email","password","authorizeUser","handleRegister","registerUser","searchCards","search","getCardsList","totalResults","handleSaveArticle","card","saveArticle","handleSignOut","removeItem","articles"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Route, Switch, useHistory } from 'react-router-dom';\n\nimport Authentication from '../Authentication/Authentication.js';\nimport { CurrentUserContext } from '../../contexts/CurrentUserContext.js';\nimport Header from '../Header/Header.js';\nimport Footer from '../Footer/Footer.js';\nimport Main from '../Main/Main.js';\nimport Register from '../Register/Register.js';\nimport SavedNews from '../SavedNews/SavedNews.js';\nimport SuccessPopup from '../SuccessPopup/SuccessPopup.js';\nimport newsApi from '../../utils/NewsApi.js';\nimport mainApi from '../../utils/MainApi.js';\n\n\nfunction App() {\n    const [cards, setCards] = useState([]);\n    const [savedCards, setSavedCards] = useState([]);\n\n    const [currentUser, setCurrentUser] = useState({});\n    const [token, setToken] = useState([]);\n\n    const [isAuthOpen, setAuthOpen] = useState(false);\n    const [isLoggedIn, setLoggedIn] = useState(false);\n    const [isRegisterOpen, setRegisterOpen] = useState(false);\n    const [isNavMobileOpen, setNavMobileOpen] = useState(false);\n    const [isNothingFoundOpen, setIsNothingFoundOpen] = useState(false);\n    const [isSuccessPopupOpen, setSuccessPopupOpen] = useState(false);\n    const [isPreloaderOpen, setIsPreloaderOpen] = useState(false);\n\n    const history = useHistory();\n\n    // global state for close on Esc\n    useEffect(() => {\n        const close = (e) => { if (e.keyCode === 27) { closeAllPopups(); } }\n        window.addEventListener('keydown', close)\n        return () => window.removeEventListener('keydown', close)\n    })\n\n    // checking token\n    useEffect(() => {\n        const token = localStorage.getItem('token');\n        if (token) {\n            mainApi.getContent(token)\n                .then(() => {\n                    setToken(token);\n                    setLoggedIn(true);\n                })\n                .catch((e) => console.log(e))\n        }\n    }, [])\n\n    // getting user info\n    React.useEffect(() => {\n        const token = localStorage.getItem('token');\n        if (token) {\n            mainApi.getUserInfo(token)\n                .then((res) => {\n                    setCurrentUser({\n                        username: res.user.username,\n                        _id: res.user._id\n                    })\n                })\n                .catch((e) => console.log(e))\n        }\n    }, [])\n\n    // popup behaviour\n    function handleAuthOpen() {\n        setSuccessPopupOpen(false);\n        setRegisterOpen(false);\n        setAuthOpen(true);\n        history.push('/signin');\n    }\n\n    function handleRegisterOpen() {\n        setAuthOpen(false);\n        setRegisterOpen(true);\n    }\n\n    function handleNavMobileOpen() {\n        setNavMobileOpen(true);\n    }\n\n    function closeAllPopups() {\n        setSuccessPopupOpen(false);\n        setRegisterOpen(false);\n        setAuthOpen(false);\n        history.push('/');\n    }\n\n    function closeNavMobile() {\n        setNavMobileOpen(false);\n    }\n\n    // user forms submit\n    function handleAuth(email, password) {\n        mainApi.authorizeUser(email, password)\n            .then((res) => {\n                closeAllPopups();\n                setLoggedIn(true);\n                setCurrentUser({ username: res.user })\n                history.push('/saved-news');\n            })\n            .catch((e) => { console.log(e) });\n    }\n\n    function handleRegister(email, password, username) {\n        mainApi.registerUser(email, password, username)\n            .then(() => {\n                setRegisterOpen(false);\n                setSuccessPopupOpen(true);\n            })\n            .catch((e) =>\n                console.log(e));\n    }\n\n    // searching cards\n    function searchCards(search) {\n        setIsPreloaderOpen(true);\n        setIsNothingFoundOpen(false);\n        setCards([]);\n\n        newsApi.getCardsList(search)\n            .then((res) => {\n                if (res.totalResults === 0) {\n                    setIsNothingFoundOpen(true);\n                } else { setCards(res) }\n            })\n            .then(() => {\n                setIsPreloaderOpen(false)\n            })\n            .catch((e) => console.log(e));\n    }\n\n    // saving an article \n    function handleSaveArticle(card) {\n        console.log(card);\n        mainApi.saveArticle(token, card)\n            .then((res) => {\n                console.log(res);\n                setSavedCards(res);\n            })\n            .catch((e) => console.log(e))\n    }\n\n    // load saved articles\n    // useEffect(() => {\n    //     mainApi.getSavedArticles(currentUser._id)\n    //         .then((res) => {\n    //             setSavedCards(res);\n    //         })\n    // }, [currentUser._id])\n\n    // logging out\n    function handleSignOut() {\n        localStorage.removeItem('token');\n        setCurrentUser({});\n        setLoggedIn(false);\n        history.push('/');\n    }\n\n    return (\n        <>\n            <CurrentUserContext.Provider value={currentUser}>\n                <div className='app'>\n                    <Switch>\n                        <Route exact path='/saved-news'>\n                            <SavedNews\n                                isLoggedIn={isLoggedIn}\n                                isNavMobileOpen={isNavMobileOpen}\n                                handleSignOut={handleSignOut}\n                                onClose={closeNavMobile}\n                                onOpen={handleNavMobileOpen}\n                                page='saved-news'\n                                savedCards={savedCards}\n                            />\n                        </Route>\n                        <Route path='/'>\n                            <Header\n                                closeNavMobile={closeNavMobile}\n                                isLoggedIn={isLoggedIn}\n                                isNavMobileOpen={isNavMobileOpen}\n                                handleRegisterOpen={handleRegisterOpen}\n                                handleSignOut={handleSignOut}\n                                onAuth={handleAuthOpen}\n                                onClose={closeAllPopups}\n                                onOpen={handleNavMobileOpen}\n                                page='main'\n                            />\n                            <Main\n                                cards={cards.articles}\n                                isLoggedIn={isLoggedIn}\n                                isNothingFoundOpen={isNothingFoundOpen}\n                                isPreloaderOpen={isPreloaderOpen}\n                                onSave={handleSaveArticle}\n                                searchCards={searchCards}\n                                page='main'\n                            />\n                        </Route>\n                    </Switch>\n\n                    <Route path='/signin'>\n                        <Authentication\n                            altFormTitle='Sign up'\n                            altFormLink='/signup'\n                            openAltForm={handleRegisterOpen}\n                            isOpen={isAuthOpen}\n                            formSubmit={handleAuth}\n                            onClose={closeAllPopups}\n                        />\n                    </Route>\n                    <Route path='/signup'>\n                        <Register\n                            altFormTitle='Sign in'\n                            altFormLink='/signin'\n                            openAltForm={handleAuthOpen}\n                            isOpen={isRegisterOpen}\n                            formSubmit={handleRegister}\n                            onClose={closeAllPopups}\n\n                        />\n                    </Route>\n\n                    <SuccessPopup\n                        isOpen={isSuccessPopupOpen}\n                        openAuth={handleAuthOpen}\n                        onClose={closeAllPopups}\n                    />\n                    <Footer />\n                </div>\n            </CurrentUserContext.Provider>\n        </>\n    )\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}