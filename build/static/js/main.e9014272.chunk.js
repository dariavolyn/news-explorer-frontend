(this["webpackJsonpnews-explorer-frontend"]=this["webpackJsonpnews-explorer-frontend"]||[]).push([[0],{27:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),c=n(20),i=n.n(c),o=(n(27),n(4)),r=n(2),l=n(8),p=n(0);var u=function(e){return Object(p.jsx)("section",{className:"popup popup_type_".concat(e.type," ").concat(e.isOpen?"popup_is_open":""),children:Object(p.jsxs)("div",{className:"popup__container popup__containter_type_form",children:[Object(p.jsx)("button",{type:"button","aria-label":"close",className:"button popup__close",onClick:e.onClose}),Object(p.jsx)("h2",{className:"popup__title",children:e.title}),Object(p.jsxs)("form",{noValidate:!0,className:"popup__form",children:[e.children,Object(p.jsx)("button",{type:"submit",value:"submit",disabled:!1===e.isValid&&"disabled",className:"button popup__submit ".concat(!1===e.isValid&&"popup__submit_disabled"),onClick:e.formSubmit,children:e.buttonText}),Object(p.jsxs)("p",{className:"popup__form-alt",children:["or ",Object(p.jsx)(l.b,{to:e.altFormLink,onClick:e.openAltForm,className:"button popup__form-alt-link",children:e.altFormTitle})]})]})]})})},d=n(11),h=n(10);function j(){var e=s.a.useState({}),t=Object(o.a)(e,2),n=t[0],c=t[1],i=s.a.useState({}),r=Object(o.a)(i,2),l=r[0],p=r[1],u=s.a.useState(!1),j=Object(o.a)(u,2),_=j[0],b=j[1],m=Object(a.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];c(e),p(t),b(n)}),[c,p,b]);return{values:n,handleChange:function(e){var t=e.target,a=t.name,s=t.value;c(Object(h.a)(Object(h.a)({},n),{},Object(d.a)({},a,s))),p(Object(h.a)(Object(h.a)({},l),{},Object(d.a)({},a,t.validationMessage))),b(t.closest("form").checkValidity())},errors:l,isValid:_,resetForm:m}}var _=function(e){var t=j(),n=t.handleChange,a=t.isValid,s=t.resetForm;return Object(p.jsxs)(u,{altFormLink:e.altFormLink,altFormTitle:e.altFormTitle,buttonText:"Sign in",formSubmit:function(e){e.preventDefault(),s()},isOpen:e.isOpen,isValid:a,title:"Sign in",type:"auth",openAltForm:e.openAltForm,onClose:e.onClose,children:[Object(p.jsx)("h6",{className:"popup__input-title popup__input-title_type_email",children:"Email"}),Object(p.jsx)("input",{minLength:"1",maxLength:"30",type:"email",className:"popup__input popup__input_type_email",placeholder:"Email",onChange:n,name:"email"}),Object(p.jsx)("span",{className:"popup__error ".concat(!1===a&&"popup__error_visible"),children:"Ivalid email address"}),Object(p.jsx)("h6",{className:"popup__input-title popup__input-title_type_password",children:"Password"}),Object(p.jsx)("input",{minLength:"1",maxLength:"30",type:"text",className:"popup__input popup__input_type_password",placeholder:"Enter password",name:"password",onChange:n})]})};var b=function(e){var t=Object(r.f)();return Object(p.jsx)("nav",{className:"navigation navigation_page_".concat(e.page," ").concat(e.isNavMobileOpen?"navigation_is_open":"navigation_is_hidden"),children:Object(p.jsxs)("div",{className:"navigation__menu navigation__menu_page_".concat(e.page," ").concat(e.isNavMobileOpen?"navigation__menu_is_open":""),children:[Object(p.jsx)("button",{className:"button navigation__close navigation__close_page_".concat(e.page),onClick:e.onClose,children:"+"}),Object(p.jsx)(l.b,{to:"/",className:"link navigation__home navigation__home_page_".concat(e.page),exact:!0,activeClassName:"navigation__home_active",children:"Home"}),"saved-news"===e.page&&Object(p.jsx)(l.b,{to:"/saved-news",className:"button navigation__saved-articles",exact:!0,activeClassName:"navigation__saved-articles_active",children:"Saved articles"}),"saved-news"===e.page?Object(p.jsx)("button",{className:"button navigation__exit",onClick:function(){t.push("/")},children:e.user}):Object(p.jsx)(l.b,{to:"/signin",className:"link navigation__signin",onClick:e.onAuth,children:"Sign in"})]})})};var m=function(e){return Object(p.jsxs)("header",{className:"header header_page_".concat(e.page),children:[Object(p.jsx)("h2",{className:"header__logo header__logo_page_".concat(e.page),children:"NewsExplorer"}),Object(p.jsx)("button",{className:"button header__nav-mobile-button header__nav-mobile-button_page_".concat(e.page),onClick:e.onOpen}),Object(p.jsx)(b,{user:e.user,page:e.page,isNavMobileOpen:e.isNavMobileOpen,onAuth:e.onAuth,onClose:e.onClose,handleRegisterOpen:e.handleRegisterOpen})]})},O=n.p+"static/media/github.c2b3aafb.svg",g=n.p+"static/media/fb_logo.673b4e8a.svg";var x=function(){return Object(p.jsxs)("footer",{className:"footer",children:[Object(p.jsx)("p",{className:"footer__copyright",children:"\xa9 2021 Supersite, Powered by News API"}),Object(p.jsxs)("nav",{className:"footer__links",children:[Object(p.jsx)(l.b,{className:"link footer__link link_type_home",to:"/",children:"Home"}),Object(p.jsx)("a",{className:"link footer__link link_type_practicum",href:"https://practicum.yandex.com/",target:"_blank",rel:"noreferrer",children:"Practicum by Yandex"}),Object(p.jsx)("a",{className:"link footer__link link_type_github",href:"https://github.com/dariavolyn",target:"_blank",rel:"noreferrer",children:Object(p.jsx)("img",{src:O,alt:"Github link"})}),Object(p.jsx)("a",{className:"link footer__link link_type_github",href:"https://www.facebook.com/daria.volyn",target:"_blank",rel:"noreferrer",children:Object(p.jsx)("img",{src:g,alt:"Facebook link"})})]})]})},v=n.p+"static/media/about-pic.9dd3ba50.jpeg";var f=function(){return Object(p.jsxs)("section",{className:"about",children:[Object(p.jsx)("img",{className:"about__picture",alt:"Author",src:v}),Object(p.jsxs)("div",{className:"about__text",children:[Object(p.jsx)("h3",{className:"about__title",children:"About the author"}),Object(p.jsx)("p",{className:"about__info",children:"This block describes the project author. Here you should indicate your name, what you do, and which development technologies you know."}),Object(p.jsx)("p",{className:"about__info",children:"You can also talk about your experience with Practicum, what you learned there, and how you can help potential customers."})]})]})},N=n(37),w=n(18),y=n.n(w);var k=function(e){return Object(p.jsxs)("li",{className:"news-card",children:[Object(p.jsx)("button",{className:"button news-card__link",children:e.image?Object(p.jsx)("img",{className:"news-card__picture",src:e.image,alt:"News cover",onClick:function(){window.open(e.link)}}):Object(p.jsx)("div",{className:"news-card__no-img-container",children:Object(p.jsx)("p",{className:"news-card__no-img",children:"No image"})})}),"saved-news"===e.page&&Object(p.jsxs)("button",{className:"button news-card__button news-card__delete",children:[Object(p.jsx)("p",{className:"news-card__picture-label",children:"Label"}),Object(p.jsx)("div",{className:"news-card__tooltip-wrap tooltip-wrap_type_delete",children:Object(p.jsx)("div",{className:"news-card__tooltip",children:Object(p.jsx)("p",{className:"news-card__tooltip-text",children:"Remove from saved"})})})]}),"main"===e.page&&Object(p.jsx)("button",{onClick:e.onSave,className:"button news-card__button news-card__save ".concat(e.isSaved?"news-card__saved":""),children:Object(p.jsx)("div",{className:"news-card__tooltip-wrap tooltip-wrap_type_save",children:Object(p.jsx)("div",{className:"news-card__tooltip",children:Object(p.jsx)("p",{className:"news-card__tooltip-text",children:"Sign in to save articles"})})})}),Object(p.jsxs)("div",{className:"news-card__content",children:[Object(p.jsx)("p",{className:"news-card__date",children:function(){y.a.locale("en");var t=e.date;return y()(t).format("DD MMMM YYYY")}()}),Object(p.jsx)("h2",{className:"news-card__title",children:e.title}),Object(p.jsx)("p",{className:"news-card__text",children:e.text}),Object(p.jsx)("p",{className:"news-card__source",children:e.source})]})]})};var S=function(e){return Object(p.jsxs)("section",{className:"news-list",children:["main"===e.page&&Object(p.jsx)("h3",{className:"news-list__title",children:"Search results"}),Object(p.jsx)("ul",{className:"news-list__cards",children:e.cards.slice(0,e.numberOfCards).map((function(t){return Object(p.jsx)(k,{date:t.publishedAt.toString(),image:t.urlToImage,link:t.url,onSave:e.onSave,page:e.page,search:e.search,source:t.source.name,text:t.content,title:t.title},Object(N.a)())}))}),"main"===e.page&&Object(p.jsx)("button",{className:"button news-list__show-more",type:"button",onClick:e.showMore,children:"Show more"})]})};var C=function(e){return Object(p.jsxs)("form",{className:"search-form",children:[Object(p.jsx)("input",{className:"search-form__bar",type:"text",id:"search",placeholder:"Enter topic",onChange:e.onChange,value:e.search}),Object(p.jsx)("button",{className:"button search-form__submit",type:"submit",value:"Search",onClick:function(t){t.preventDefault(),e.onSubmit(e.search)},children:"Search"})]})};var F=function(e){return Object(p.jsxs)("div",{className:"preloader ".concat(e.isOpen?"":"preloader_hide"),children:[Object(p.jsx)("i",{className:"preloader__circle"}),Object(p.jsx)("p",{className:"preloader__text",children:"Searching for news..."})]})},L=n.p+"static/media/not-found_v1.5661906d.svg";var T=function(e){return Object(p.jsxs)("div",{className:"nothing-found ".concat(e.isOpen?"":"nothing-found_hide"),children:[Object(p.jsx)("img",{className:"nothing-found__icon",alt:"Nothing found",src:L}),Object(p.jsx)("h3",{className:"nothing-found__title",children:"Nothing found"}),Object(p.jsx)("p",{className:"nothing-found__message",children:"Sorry, but nothing matched your search terms."})]})};var A=function(e){var t=Object(a.useState)(""),n=Object(o.a)(t,2),s=n[0],c=n[1],i=Object(a.useState)(3),r=Object(o.a)(i,2),l=r[0],u=r[1];return Object(p.jsxs)("main",{className:"main",children:[Object(p.jsx)("div",{className:"intro",children:Object(p.jsxs)("div",{className:"intro__text",children:[Object(p.jsx)("h1",{className:"intro__title",children:"What's going on in the world?"}),Object(p.jsx)("h2",{className:"intro__subtitle",children:"Find the latest news on any topic and save them in your personal account."}),Object(p.jsx)(C,{onSubmit:function(){u(3),e.searchCards(s)},search:s,onChange:function(e){c(e.target.value)}})]})}),Object(p.jsx)(F,{isOpen:e.isPreloaderOpen}),e.cards&&Object(p.jsx)(S,{cards:e.cards,isSaved:e.isSaved,numberOfCards:l,onSave:e.onSave,page:e.page,search:s,showMore:function(){u((function(e){return e+3}))}}),Object(p.jsx)(T,{isOpen:e.isNothingFoundOpen}),Object(p.jsx)(f,{})]})};var E=function(e){var t=j(),n=t.values,a=t.handleChange,s=t.isValid,c=t.resetForm;return Object(p.jsxs)(u,{altFormLink:e.altFormLink,altFormTitle:e.altFormTitle,buttonText:"Sign up",formSubmit:function(t){t.preventDefault(),e.formSubmit(n.email,n.password,n.username),console.log("yay"),c()},isOpen:e.isOpen,isValid:s,openAltForm:e.openAltForm,onClose:e.onClose,title:"Sign up",type:"register",children:[Object(p.jsx)("h6",{className:"popup__input-title popup__input-title_type_email",children:"Email"}),Object(p.jsx)("input",{required:!0,minLength:"1",maxLength:"30",type:"email",name:"email",className:"popup__input popup__input_type_email",placeholder:"Email",onChange:a}),Object(p.jsx)("span",{className:"popup__error ".concat(!1===s&&"popup__error_visible"),children:"Invalid email address"}),Object(p.jsx)("h6",{className:"popup__input-title popup__input-title_type_password",children:"Password"}),Object(p.jsx)("input",{required:!0,minLength:"1",maxLength:"30",type:"text",name:"password",className:"popup__input popup__input-password",placeholder:"Enter password",onChange:a}),Object(p.jsx)("h6",{className:"popup__input-title popup__input_title_type_username",children:"Username"}),Object(p.jsx)("input",{required:!0,minLength:"1",maxLength:"30",type:"text",name:"username",className:"popup__input popup__input_type_username",placeholder:"Username",onChange:a}),Object(p.jsx)("span",{className:"popup__error",children:"This email is not available"})]})};var M=function(){return Object(p.jsxs)("div",{className:"saved-news__text",children:[Object(p.jsx)("h3",{className:"saved-news__title",children:"Saved articles"}),Object(p.jsx)("h2",{className:"saved-news__intro-amount",children:"Elise, you have 5 saved articles"}),Object(p.jsxs)("p",{className:"saved-news__keywords",children:["By keywords: ",Object(p.jsx)("span",{style:{fontWeight:"bold"},children:"Nature, Yellowstone, and 2 other"})]})]})};var U=function(e){return Object(p.jsxs)("div",{className:"saved-news",children:[Object(p.jsx)(m,{page:e.page,user:"Elise",isNavMobileOpen:e.isNavMobileOpen,onOpen:e.onOpen,onClose:e.onClose}),Object(p.jsx)(M,{}),Object(p.jsx)(S,{page:e.page})]})};var P=function(e){return Object(p.jsx)("section",{className:"popup popup_type_success ".concat(e.isOpen?"popup_is_open":""),children:Object(p.jsxs)("div",{className:"popup__container popup__container_type_success",children:[Object(p.jsx)("button",{type:"button","aria-label":"close",className:"button popup__close",onClick:e.onClose}),Object(p.jsx)("h2",{className:"popup__title",children:"Registration successfully completed!"}),Object(p.jsx)("button",{onClick:e.openAuth,className:"button popup__success-singin",children:"Sign in"})]})})},R=n(13),D=n(14);var I=new(function(){function e(t){var n=t.newsUrl,a=t.headers;Object(R.a)(this,e),this.newsUrl=n,this.headers=a}return Object(D.a)(e,[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}},{key:"getCardsList",value:function(e){return fetch("".concat(this.newsUrl,"/everything?q=").concat(e,"&from=").concat(new Date(Date.now()-6048e5).toISOString().slice(0,10),"&to=").concat((new Date).toISOString().slice(0,10),"&pageSize=10&apiKey=c4ef0e54c94849e194ad5251b2d39e56"),{method:"GET",headers:this.headers}).then(this._checkResponse)}}]),e}())({newsUrl:"https://nomoreparties.co/news/v2",headers:{"Content-Type":"application/json"}}),V=new(function(){function e(t){var n=t.baseUrl,a=t.headers;Object(R.a)(this,e),this.baseUrl=n,this.headers=a}return Object(D.a)(e,[{key:"_checkResponse",value:function(e){return e.ok?e.json():console.log("Error: ".concat(e.status))}},{key:"registerUser",value:function(e,t,n){return fetch("".concat(this.baseUrl,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,username:n})}).then(this._checkResponse)}},{key:"authorizeUser",value:function(e){var t=e.email,n=e.password;return fetch("".concat(this.baseUrl,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:t,password:n})}).then(this._checkResponse).then((function(e){return e.token?(localStorage.setItem("token",e.token),e):void 0}))}},{key:"getContent",value:function(e){return fetch("".concat(this.baseUrl,"/users/me"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then(this._checkResponse).then((function(e){return e}))}}]),e}())({baseUrl:"https://dasha-news.students.nomoreparties.site"});var Y=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(!1),i=Object(o.a)(c,2),l=i[0],u=i[1],d=Object(a.useState)(!1),h=Object(o.a)(d,2),j=h[0],b=h[1],O=Object(a.useState)(!1),g=Object(o.a)(O,2),v=g[0],f=g[1],N=Object(a.useState)(!1),w=Object(o.a)(N,2),y=w[0],k=w[1],S=Object(a.useState)(!1),C=Object(o.a)(S,2),F=C[0],L=C[1],T=Object(a.useState)(!1),M=Object(o.a)(T,2),R=M[0],D=M[1],Y=Object(a.useState)(!1),q=Object(o.a)(Y,2),B=q[0],J=q[1],z=Object(r.f)();function G(){L(!1),u(!1),b(!0)}function H(){b(!1),u(!0)}function W(){f(!0)}function K(e){z.push("/"),L(!1),u(!1),b(!1),f(!1)}return Object(a.useEffect)((function(){var e=function(e){27===e.keyCode&&K()};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[]),Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:"app",children:[Object(p.jsxs)(r.c,{children:[Object(p.jsxs)(r.a,{path:"/",children:[Object(p.jsx)(m,{isNavMobileOpen:v,onAuth:G,onClose:K,onOpen:W,handleRegisterOpen:H,page:"main"}),Object(p.jsx)(A,{cards:n.articles,isNothingFoundOpen:B,isPreloaderOpen:R,isSaved:y,onSave:function(){k(!0)&&k(!1),k(!0)},page:"main",searchCards:function(e){D(!0),J(!1),s([]),I.getCardsList(e).then((function(e){0===e.totalResults?J(!0):s(e)})).then((function(){return D(!1)})).catch((function(e){console.log(e)}))}})]}),Object(p.jsx)(r.a,{exact:!0,path:"/saved-news",children:Object(p.jsx)(U,{isNavMobileOpen:v,onClose:K,onOpen:W,page:"saved-news"})})]}),Object(p.jsxs)(r.c,{children:[Object(p.jsx)(r.a,{exact:!0,path:"/signin",children:Object(p.jsx)(_,{altFormTitle:"Sign up",altFormLink:"/signup",openAltForm:H,isOpen:j,formSubmit:function(e){e.preventDefault(),K(),z.push("/saved-news")},onClose:K})}),Object(p.jsx)(r.a,{exact:!0,path:"/signup",children:Object(p.jsx)(E,{altFormTitle:"Sign in",altFormLink:"/signin",openAltForm:G,isOpen:l,formSubmit:function(e,t,n){console.log(e,t,n),V.registerUser(e,t,n).then((function(e){e&&(L(!0),u(!1),z.push("/signin"))})).catch((function(e){console.log(e)}))},onClose:K})})]}),Object(p.jsx)(P,{isOpen:F,openAuth:G,onClose:K}),Object(p.jsx)(x,{})]})})},q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,38)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),s(e),c(e),i(e)}))};i.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(l.a,{children:Object(p.jsx)(Y,{})})}),document.getElementById("root")),q()}},[[35,1,2]]]);
//# sourceMappingURL=main.e9014272.chunk.js.map